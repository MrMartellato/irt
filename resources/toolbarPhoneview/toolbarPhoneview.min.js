var sharingShowing=!1,sharingUI={},shareCurrentPage=!1,toolbarInit=function(){yudu_events.subscribe(yudu_events.ALL,yudu_events.TAP,hideSharing,!1);initSharing()},initSharing=function(){sharingUI={shareButton:$("#share"),dropdown:{container:$("#shareContainer"),currentPage:$("#currentPage"),firstPage:$("#firstPage")}};sharingUI.dropdown.firstPage.attr("tabIndex","-1");var a={};sharingUI.dropdown.container.addClass(yudu_commonSettings.isDesktop?"isDesktop":"touchDevice");yudu_commonFunctions.createHammerJSTapManager(sharingUI.dropdown.container[0]).on("tap",
function(d){var c=d.target.id;if(c&&a[c]&&"function"==typeof a[c])a[c](d)});$(".noDrag").on("touchmove",function(){return!1});if(yudu_toolbarSettings.sharing.emailEnabled||yudu_toolbarSettings.sharing.twitter||yudu_toolbarSettings.sharing.facebook||yudu_toolbarSettings.sharing.linkedIn)a.currentPage=function(){toggleSharingPage(!0)},a.firstPage=function(){toggleSharingPage(!1)};var b=function(d,c,b){var f=document.getElementById(d),g=document.createElement("img");g.classList.add("noPointerEvents");
g.src=c;f.insertBefore(g,f.firstChild);f.style.display="block";a[d]=e(b)},e=function(a){return function(b){hideSharing();"function"==typeof a&&a(b);yudu_commonFunctions.hideToolbar()}};yudu_toolbarSettings.sharing.emailEnabled&&b("email",yudu_sharingSettings.toolbarIconBasePath+"email.png",yudu_sharingFunctions.shareEmail);yudu_toolbarSettings.sharing.twitter&&b("twitter",yudu_sharingSettings.twitterIconPath,yudu_sharingFunctions.shareTwitter);yudu_toolbarSettings.sharing.facebook&&b("facebook",yudu_sharingSettings.facebookIconPath,
yudu_sharingFunctions.shareFacebook);yudu_toolbarSettings.sharing.linkedIn&&b("linkedIn",yudu_sharingSettings.linkedInIconPath,yudu_sharingFunctions.shareLinkedIn);setSharingLeftPosition()},toggleSharingPage=function(a){a!=shareCurrentPage&&(shareCurrentPage=a,yudu_sharingFunctions.togglePage(a),sharingUI.dropdown.currentPage.toggleClass("selected"),sharingUI.dropdown.firstPage.toggleClass("selected"))},toggleShareAction=function(a){1==a||0==a?toggleSharing(!1,a):toggleSharing(!0)},toggleSharing=
function(a,b){var e=a?!sharingShowing:b;if(e==sharingShowing)return sharingShowing;e?(sharingUI.dropdown.container.show(),sharingUI.dropdown.firstPage.focus()):sharingUI.dropdown.container.hide();sharingShowing=e;setSharingLeftPosition();return sharingShowing},setSharingLeftPosition=function(){if(sharingShowing){var a=sharingUI.shareButton.offset().left,a=Math.min(a,yudu_commonSettings.width/yudu_commonSettings.pixelDensity-sharingUI.dropdown.container.width()-10);sharingUI.dropdown.container.css({left:a,
width:sharingUI.dropdown.container.width()})}},hideSharing=function(){sharingShowing&&toggleSharing(!1,!1)},cssFiles=[yudu_commonFunctions.createBrandingPath("toolbarPhoneview/style.css")];yudu_commonFunctions.loadCss(cssFiles,toolbarInit);